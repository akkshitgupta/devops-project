apiVersion: argoproj.io/v1alpha1
kind: AppProject
metadata:
  name: dp-k8s-safe
  namespace: argocd
spec:
  description: Safe GitOps monitoring for DevOps Project (read-only initially)
  
  # Source repositories - only allow your specific repo
  sourceRepos:
  - 'https://github.com/akkshitgupta/devops-project.git'
  
  # Destination clusters and namespaces
  destinations:
  - namespace: dp-ns
    server: https://kubernetes.default.svc
  
  # Cluster resource allow list - only allow specific resources
  clusterResourceWhitelist:
  - group: ''
    kind: Namespace
  - group: 'networking.k8s.io'
    kind: Ingress
  
  # Namespace resource allow list - be very restrictive
  namespaceResourceWhitelist:
  - group: ''
    kind: ConfigMap
  - group: 'apps'
    kind: Deployment
  - group: ''
    kind: Service
  - group: ''
    kind: PersistentVolumeClaim
  
  # Resource deny list - prevent dangerous operations
  clusterResourceBlacklist:
  - group: 'rbac.authorization.k8s.io'
    kind: ClusterRole
  - group: 'rbac.authorization.k8s.io'
    kind: ClusterRoleBinding
  
  # Orphaned resources - don't delete anything automatically
  orphanedResources:
    warn: true  # Warn about orphaned resources but don't delete
  
  # Signature keys - none for now (we'll add later if needed)
  signatureKeys: []
